<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

{% assign has_video = false %}
{% assign has_screenshot_png = false %}
{% assign screenshot_fallback = nil %}

{% for file in site.static_files %}
    {% if file.path contains 'assets/videos/' %}
        {% unless file.path contains 'assets/videos/Place-video-files-here.txt' %}
            {% assign has_video = true %}
        {% endunless %}
    {% endif %}
    {% if file.path == '/assets/screenshot.png' %}
        {% assign has_screenshot_png = true %}
    {% endif %}
    {% if file.path contains 'assets/screenshot/' %}
        {% unless screenshot_fallback %}
            {% assign screenshot_fallback = file.path %}
        {% endunless %}
    {% endif %}
{% endfor %}

{% if has_video %}
    {% for file in site.static_files %}
        {% if file.path contains 'assets/videos/' %}
            {% unless file.path contains 'assets/videos/Place-video-files-here.txt' %}
                <script>
                    $(function() {
                        $(".iphoneScreen").addClass("hidden");
                        console.log("remove screenshot");
                    });
                </script>
            {% endunless %}
            {% if file.extname == ".mov" or file.extname == ".mp4" %}
                <script>
                    $(function() {
                        $(".videoContainer").removeClass("hidden");
                        $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/mp4">');
                        console.log("{{ file.path }}");
                    });
                </script>
            {% elsif file.extname == ".ogg" %}
                <script>
                    $(function() {
                        $(".videoContainer").removeClass("hidden");
                        $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/ogg">');
                        console.log("{{ file.path }}");
                    });
                </script>
            {% elsif file.extname == ".webm" %}
                <script>
                    $(function() {
                        $(".videoContainer").removeClass("hidden");
                        $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/webm">');
                        console.log("{{ file.path }}");
                    });
                </script>
            {% endif %}
        {% endif %}
    {% endfor %}
{% else %}
    {% if has_screenshot_png %}
        <script>
            $(function() {
                $(".iphoneScreen").attr('src', '{{ site.github.baseurl }}/assets/screenshot.png');
                $(".iphoneScreen").removeClass("hidden");
            });
        </script>
    {% elsif screenshot_fallback %}
        <script>
            $(function() {
                $(".iphoneScreen").attr('src', '{{ site.github.baseurl }}{{ screenshot_fallback }}');
                $(".iphoneScreen").removeClass("hidden");
                console.log("{{ screenshot_fallback }}");
            });
        </script>
    {% endif %}
{% endif %}
